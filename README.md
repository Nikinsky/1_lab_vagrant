# Лабораторная работа: Vagrant и обновление ядра Linux

## Что такое Vagrant?

**Vagrant** — это инструмент с открытым исходным кодом для создания и управления виртуальными средами разработки.

### Основные характеристики:

- **Автоматизация** — позволяет быстро разворачивать виртуальные машины с предустановленным ПО с помощью простых команд в терминале
- **Конфигурация как код** — все настройки среды (ОС, сетевые параметры, устанавливаемые пакеты) записываются в один текстовый файл `Vagrantfile`
- **Изоляция и идентичность** — гарантирует, что у всех разработчиков в команде будет абсолютно одинаковая программная среда, что решает проблему *"у меня на компьютере всё работает, а на сервере — нет"*
- **Работа с провайдерами** — Vagrant сам не является гипервизором; он управляет ими. Чаще всего используется с VirtualBox, но также поддерживает VMware, Hyper-V и Docker

---

## Установка и настройка

### Шаг 1: Установка необходимых компонентов

Первым делом были установлены:
- **VirtualBox** — гипервизор для запуска виртуальных машин
- **HashiCorp Vagrant** — [vagrantup.com/downloads](https://www.vagrantup.com/downloads)

### Шаг 2: Создание проекта

Создана папка проекта, внутри которой размещён файл `Vagrantfile` с готовым кодом для создания виртуальной машины.

### Шаг 3: Запуск виртуальной машины

После сохранения файла запущен скрипт командой:

```bash
vagrant up
```

---

## Обновление ядра Linux

### Проверка текущей версии ядра

```bash
[vagrant@kernel-update ~]$ uname -r
4.18.0-516.el8.x86_64
```

### Установка репозитория ELRepo

```bash
sudo yum install -y https://elrepo.org/linux/extras/el8/x86_64/RPMS/elrepo-release-8.2-1.el8.elrepo.noarch.rpm
```

### Установка последнего ядра

Установлено последнее ядро из репозитория `elrepo-kernel`:

```bash
sudo yum --enablerepo=elrepo-kernel install kernel-ml -y --nogpgcheck
```

### Настройка загрузчика GRUB

После установки нового ядра необходимо переключиться на новую версию в конфигурациях.

**1) Обновление конфигурации загрузчика:**

```bash
sudo grub2-mkconfig -o /boot/grub2/grub.cfg
```

**2) Выбор загрузки нового ядра по умолчанию:**

```bash
sudo grub2-set-default 0
```

### Перезагрузка системы

```bash
sudo reboot
```

### Проверка обновлённого ядра

После перезагрузки ядро было успешно обновлено:

```bash
[vagrant@kernel-update ~]$ uname -r
6.18.6-1.el8.elrepo.x86_64
```

---

## Дополнительная информация

### Типы ядер в ELRepo

- **kernel-ml** — свежие и стабильные ядра (mainline)
- **kernel-lt** — стабильные ядра с длительной версией поддержки (long-term), более старые, чем версия ml

### Nested Virtualization

**Nested Virtualization** — это возможность запускать гипервизоры (например, Hyper-V, KVM, VMware) внутри виртуальной машины, которая сама работает под управлением гипервизора первого уровня. Это позволяет создавать виртуальные машины "внутри" других виртуальных машин, что идеально подходит для:
- Тестирования
- Обучения
- Развёртывания облачных сред

### HashiCorp

**HashiCorp** — это компания, разрабатывающая популярные инструменты для управления облачной инфраструктурой и автоматизации в DevOps.

Самый известный продукт — **HashiCorp Vault** — система для безопасного хранения и управления секретами (паролями, ключами, сертификатами), которая позволяет контролировать доступ к конфиденциальной информации.

---

## Выводы

В ходе лабораторной работы были освоены:
- Установка и настройка Vagrant для автоматизации развёртывания виртуальных сред
- Обновление ядра Linux в CentOS/RHEL с использованием репозитория ELRepo
- Настройка загрузчика GRUB для выбора новой версии ядра
